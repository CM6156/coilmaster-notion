# 텔레그램 알림 시스템 설정 가이드

## 📱 개요
이 시스템은 프로젝트와 업무의 마감일이 3일 이하로 남았거나 마감일이 지났을 때 자동으로 텔레그램으로 알림을 보내주는 기능을 제공합니다.

## 🤖 1. 텔레그램 봇 생성

### 1.1 BotFather와 대화
1. 텔레그램에서 [@BotFather](https://t.me/botfather)를 찾아 대화 시작
2. `/newbot` 명령어 입력
3. 봇 이름 입력 (예: Coilmaster Notifications)
4. 봇 사용자명 입력 (예: coilmaster_notify_bot)
5. 생성된 **봇 토큰**을 복사해서 안전한 곳에 보관

### 1.2 환경 변수 설정
`.env` 파일에 봇 토큰 추가:
```env
VITE_TELEGRAM_BOT_TOKEN=1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ
```

## 👥 2. 채팅 ID 확인 방법

### 2.1 개인 채팅 ID
1. 생성한 봇과 개인 채팅 시작
2. `/start` 메시지 전송
3. 브라우저에서 다음 URL 방문:
   ```
   https://api.telegram.org/bot[BOT_TOKEN]/getUpdates
   ```
4. 응답에서 `chat.id` 값을 확인 (양수)

### 2.2 그룹 채팅 ID
1. 그룹에 봇을 초대
2. 그룹에서 아무 메시지나 전송
3. 브라우저에서 getUpdates URL 방문
4. 응답에서 `chat.id` 값을 확인 (음수, 보통 -100으로 시작)

### 2.3 봇에게 관리자 권한 부여
그룹에서 알림을 받으려면 봇에게 메시지 전송 권한을 부여해야 합니다:
1. 그룹 정보 → 관리자 편집
2. 봇을 관리자로 추가
3. "메시지 전송" 권한 활성화

## ⚙️ 3. 시스템 설정

### 3.1 기본 설정
웹 애플리케이션의 "텔레그램 알림" 메뉴에서 설정:

- **알림 활성화**: 전체 알림 시스템 on/off
- **그룹 채팅 ID**: 전체 알림을 받을 그룹의 채팅 ID
- **알림 시간**: 하루 중 알림을 보낼 시간 (기본: 오전 9시)
- **체크 간격**: 마감일 체크 주기 (기본: 1시간)
- **주말 알림**: 주말에도 알림을 보낼지 설정

### 3.2 사용자별 설정
각 담당자의 텔레그램 정보 등록:
- **텔레그램 사용자명**: @username (그룹에서 태그용)
- **채팅 ID**: 개인 메시지를 받을 채팅 ID

## 🔔 4. 알림 기능

### 4.1 자동 알림
- **마감 임박 (3일 이하)**: 🔔 아이콘과 함께 알림
- **마감일 경과**: 🚨 아이콘과 함께 긴급 알림
- **담당자 태그**: 그룹에서 관련 담당자들을 @태그

### 4.2 수동 알림
- **즉시 알림 발송**: 테스트 탭에서 수동으로 알림 발송
- **테스트 메시지**: 설정이 올바른지 확인하는 테스트 메시지

## 📋 5. 알림 메시지 예시

### 5.1 마감임박 알림
```
⚠️ 마감일 알림 ⚠️

🔔 마감임박 (3일 이하)
📁 프로젝트 A 개발
   📅 12월 25일 (2일 후 마감)
   👤 김개발
   📊 진행률: 75%

📋 UI 디자인 작업
   📅 12월 24일 (내일 마감)
   👤 이디자인
   📊 진행률: 90%
   📁 프로젝트: 프로젝트 A 개발

📱 업무 관리 시스템에서 확인하세요!

👥 담당자: @kim_dev @lee_design
```

### 5.2 마감일 경과 알림
```
⚠️ 마감일 알림 ⚠️

🚨 마감일 경과
📁 프로젝트 B 기획
   📅 12월 20일 (3일 지연)
   👤 박기획
   📊 진행률: 60%

📱 업무 관리 시스템에서 확인하세요!

👥 담당자: @park_plan
```

## 🔧 6. 문제 해결

### 6.1 봇이 응답하지 않는 경우
- 봇 토큰이 올바른지 확인
- 봇이 차단되지 않았는지 확인
- 인터넷 연결 상태 확인

### 6.2 그룹에서 메시지가 전송되지 않는 경우
- 봇이 그룹에 추가되어 있는지 확인
- 봇에게 메시지 전송 권한이 있는지 확인
- 그룹 채팅 ID가 올바른지 확인 (음수여야 함)

### 6.3 개인 메시지가 전송되지 않는 경우
- 사용자가 봇과 대화를 시작했는지 확인 (`/start` 명령)
- 개인 채팅 ID가 올바른지 확인 (양수여야 함)

## 📝 7. 보안 주의사항

- **봇 토큰 보안**: 봇 토큰을 공개 저장소에 업로드하지 마세요
- **채팅 ID 관리**: 채팅 ID는 민감한 정보이므로 안전하게 관리하세요
- **권한 제한**: 봇에게 필요한 최소 권한만 부여하세요

## 🔄 8. 업데이트 및 유지보수

### 8.1 정기 점검 항목
- 봇의 응답 상태 확인
- 알림 발송 로그 검토
- 사용자 피드백 수집

### 8.2 기능 확장 가능성
- 다양한 알림 조건 추가
- 커스텀 메시지 템플릿
- 알림 통계 및 분석
- 다른 메신저 플랫폼 지원

---

💡 **팁**: 시스템의 "테스트" 탭에서 봇 상태를 확인하고 테스트 메시지를 보내볼 수 있습니다! 